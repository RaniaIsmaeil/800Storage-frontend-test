<header class="topbar">
  <div class="brand">
    <div class="brand-mark">800</div>
    <div class="brand-text">
      <span class="brand-title">User Directory</span>
      <span class="brand-subtitle">ReqRes API</span>
    </div>
  </div>

  <nav class="topbar-actions">
    <form class="search" (ngSubmit)="onSubmit()" autocomplete="off" novalidate>
      <input
        type="search"
        placeholder="Search user by ID"
        [value]="query"
        (input)="onQueryChange($any($event.target).value)"
        (focus)="openPanel()"
        name="userSearch"
      />
      <div class="search-panel" *ngIf="showPanel()">
        <div class="search-status" *ngIf="isSearching()">Searching...</div>
        <div class="search-status error" *ngIf="error()">{{ error() }}</div>
        <button
          type="button"
          class="search-result"
          *ngFor="let user of results()"
          (click)="goToUser(user)"
        >
          <img [src]="user.avatar" [alt]="user.first_name + ' ' + user.last_name" />
          <div>
            <strong>{{ user.first_name }} {{ user.last_name }}</strong>
            <span>ID: {{ user.id }}</span>
          </div>
        </button>
      </div>
    </form>

    <button type="button" class="theme-toggle" (click)="theme.toggle()" aria-label="Toggle theme">
      @if (theme.mode() === 'light') {
        <span class="icon sun" aria-hidden="true">â˜€</span>
      } @else {
        <span class="icon moon" aria-hidden="true">
          <svg viewBox="0 0 24 24" role="presentation">
            <path d="M14.5 2a9.5 9.5 0 1 0 7.2 15.7 1 1 0 0 0-1.08-1.55 7 7 0 0 1-8.77-8.77A1 1 0 0 0 10.3 6.3 9.5 9.5 0 0 0 14.5 2Z" />
          </svg>
        </span>
      }
    </button>
  </nav>
</header>
